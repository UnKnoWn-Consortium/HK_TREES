<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hong Kong Tree Database</title>
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="apple-mobile-web-app-title" content="Hong Kong Tree Database">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <!-- <link rel="icon" type="image/png" sizes="192x192"  href="">
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="img/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon/favicon-16x16.png">
    <link rel="icon" type="image/x-icon" sizes="16x16" href="img/favicon/favicon.ico">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300' rel='stylesheet' type='text/css'> -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700|Poiret+One|Graduate' rel="stylesheet" type="text/css">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet"  type="text/css">
    <link href="style/main.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.4/angular.min.js"></script>
    <script src="script/vendor/ui-bootstrap-tpls-0.13.3.min.js"></script>
</head>
<body data-ng-app="main">
    <header>
        <main>
            <h1>Hong Kong</h1>
            <img class="img-circle" alt="100x100" src="img/tree_logo.png">
            <h1>Tree Database</h1>
        </main>
        <aside class="btn-group">
            <button type="button" class="btn btn-default active"><img class="btn-icon" alt="list" src="img/list.svg">List</button>
            <button type="button" class="btn btn-default"><img class="btn-icon" alt="map" src="img/map.svg">Map</button>
        </aside>
        <aside class="btn-group" id="user-svc" dropdown keyboard-nav>
            <button id="user" type="button" class="btn btn-info">
                <img class="img-rounded avatar" alt="50x50" src="data/users/avatars/avatar.svg">
                <div id="username">Username</div>
            </button>
            <button type="button" class="btn btn-info dropdown-toggle" style="height: 49px" dropdown-toggle>
                <span class="caret"></span>
                <span class="sr-only">Toggle Dropdown</span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="user">
                <li><a href="#"><span class="glyphicon glyphicon-user"></span> User</a></li>
                <li><a href="#"><span class="glyphicon glyphicon-cog"></span> Settings</a></li>
                <li role="separator" class="divider"></li>
                <li><a href="#"><span class="glyphicon glyphicon-log-out"></span> Logout</a></li>
            </ul>
        </aside>
    </header>
    <main id="list-space" data-ng-controller="cardSpaceCtrl as parentCtrl">

        <article class="central-and-western" data-ng-repeat="tree in parentCtrl.trees" data-ng-controller="cardCtrl as ctrl">
            <section class="photo-container" data-ng-click="ctrl.toggleBackFace()" data-ng-class="{'flip': ctrl.backFace}">
                <div class="photo">
                    <div class="front face">
                        <img data-ng-repeat="photo in tree.photos" alt="tree photo {{$index}}" data-ng-src="data/tree_photos/{{photo.path}}" data-ng-class="{removed: tree.removed}">
                    </div>
                    <div class="back face">
                        <section class="info">
                            <div class="species plate">
                                <div class="part owner">
                                    <h1>GOV</h1>
                                    <div class="icon">
                                        <img data-ng-if="tree.stone_wall_tree" alt="Stone Wall Tree" src="img/stone-wall-tree.svg" class="icon">
                                    </div>
                                </div>
                                <div class="part species">
                                    <h1 data-ng-bind="tree.species"></h1>
                                </div>
                            </div>
                            <div class="register plate">
                                <div class="part department">
                                    <h1>HYD</h1>
                                    <div>
                                        <img alt="Highways Department" src="img/govt_dept/hyd.png" class="icon">
                                    </div>
                                </div>
                                <div class="part number">
                                    <h1 data-ng-bind="tree.register_no"></h1>
                                </div>
                            </div>
                            <div class="special-notice" data-ng-if="tree.removed">
                                <h3>Removed on </h3>
                                <h3>{{tree.removed_date | date:"d'th' MMMM yyyy"}}</h3>
                                <h4>due to</h4>
                                <h3 data-ng-repeat="reason in tree.removed_reasons" data-ng-bind="reason"></h3>
                            </div>
                            <button class="btn btn-primary btn-block">Read Previous Records</button>
                        </section>
                    </div>
                </div>
            </section>

            <section class="location">
                <h3 data-ng-bind="tree.location"></h3>
                <h3 data-ng-bind="tree.district | districtFilter"></h3>
            </section>
        </article>


    </main>
    <script>
        var app = angular.module('main', ['ui.bootstrap']);
        app.controller('cardSpaceCtrl', [function(){
            this.trees = [{ // Reference object database schema (removed=false)
                district: "cw",
                location: "Arbuthnot Road",
                govt: true,
                dept: "hyd",
                removed: false,
                stone_wall_tree: true,
                species: "Ficus Microcarpa",
                register_no: "CW/002",
                dept_no: "hyd_hk_11sw_b_r74_0_wt2",
                photos: [{path: "hyd_hk_11sw_b_r74_0_wt2.jpg"}]
            }, { // Reference object database schema (removed=true)
                district: "cw",
                location: "Arbuthnot Road",
                govt: true,
                dept: "hyd",
                removed: true,
                removed_date: "2015-06-05T12:00:00.000Z",
                removed_reasons: ["Trunk Failure"],
                stone_wall_tree: true,
                species: "Ficus Virens Var. Sublanceolata",
                register_no: "CW/003",
                dept_no: "hyd_hk_11sw_b_r74_0_wt3",
                photos: [{path: "hyd_hk_11sw_b_r74_0_wt3.jpg"}]
            }, {
                district: "cw",
                location: "Arbuthnot Road",
                govt: true,
                dept: "hyd",
                removed: false,
                stone_wall_tree: true,
                species: "Ficus Virens Var. Sublanceolata",
                register_no: "CW/004",
                dept_no: "hyd_hk_11sw_b_r74_0_wt4",
                photos: [{path: "hyd_hk_11sw_b_r74_0_wt4.jpg"}]
            }, {
                district: "cw",
                location: "Borrett Road",
                govt: true,
                dept: "hyd",
                removed: false,
                stone_wall_tree: false,
                species: "Ficus Microcarpa",
                register_no: "CW/007",
                dept_no: "hyd_hk_11sw_b_r530_0_wt1",
                photos: [{path: "hyd_hk_11sw_b_r530_0_wt1.jpg"}]
            }]
        }]).controller('cardCtrl', [function(){
            this.backFace = false;
            this.toggleBackFace = function(){
                this.backFace = !this.backFace;
            };
        }]);

        app.filter('districtFilter', [function(){
            var dist_table = {
                 cw: 'Central and Western',
                  e: 'Eastern',
                  s: 'Southern',
                 wc: 'Wan Chai',
                 kc: 'Kowloon City',
                ktn: 'Kwun Tong',
                ssp: 'Sham Shui Po',
                wts: 'Wong Tai Sin',
                ytm: 'Yau Tsim Mong',
                 is: 'Island',
                kts: 'Kwai Tsing',
                  n: 'North',
                 sk: 'Sai Kung',
                 st: 'Sha Tin',
                 tp: 'Tai Po',
                 tw: 'Tsuen Wan',
                 tm: 'Tuen Mun',
                 yl: 'Yuen Long'
            };
            return function(input){
                return dist_table[input];
            };
        }]).filter('areaFilter', [function(){
            var area_table = {
                 cw: 'Hong Kong',
                  e: 'Hong Kong',
                  s: 'Hong Kong',
                 wc: 'Hong Kong',
                 kc: 'Kowloon',
                ktn: 'Kowloon',
                ssp: 'Kowloon',
                wts: 'Kowloon',
                ytm: 'Kowloon',
                 is: 'New Territories',
                kts: 'New Territories',
                  n: 'New Territories',
                 sk: 'New Territories',
                 st: 'New Territories',
                 tp: 'New Territories',
                 tw: 'New Territories',
                 tm: 'New Territories',
                 yl: 'New Territories'
            };
            return function(input){
                return area_table[input];
            };
        }]);
    </script>
</body>
</html>